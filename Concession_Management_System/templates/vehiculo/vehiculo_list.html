{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
  <h1 class="mb-4">Listado de Vehículos</h1>

  <form method="get" class="row g-3 mb-4">
    <div class="col-md-4">
      <label for="marca" class="form-label">Marca:</label>
      <input type="text" name="marca" id="marca" class="form-control" value="{{ request.GET.marca }}">
    </div>
    <div class="col-md-4">
      <label for="modelo" class="form-label">Modelo:</label>
      <input type="text" name="modelo" id="modelo" class="form-control" value="{{ request.GET.modelo }}">
    </div>
    <div class="col-md-4 d-flex align-items-end">
      <button type="submit" class="btn btn-primary">Filtrar</button>
    </div>
  </form>

  <a href="{% url 'vehiculo_create' %}" class="btn btn-success mb-4">Agregar Vehículo</a>

  <table class="table table-striped table-hover table-bordered">
    <thead class="table-dark">
      <tr>
        <th>Marca</th>
        <th>Modelo</th>
        <th>Año</th>
        <th>Color</th>
        <th>Precio</th>
        <th>Imagen</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      {% for vehiculo in vehiculos %}
        <tr>
          <td>{{ vehiculo.marca }}</td>
          <td>{{ vehiculo.modelo }}</td>
          <td>{{ vehiculo.año }}</td>
          <td>{{ vehiculo.color }}</td>
          <td>{{ vehiculo.precio_lista }}</td>
          <td>
            {% if vehiculo.image_vehiculo %}
              <img src="{{ vehiculo.image_vehiculo.url }}" alt="{{ vehiculo.marca }} {{ vehiculo.modelo }}" width="100">
            {% else %}
              Sin imagen
            {% endif %}
          </td>
          <td>
            <a href="{% url 'vehiculo_update' vehiculo.pk %}" class="btn btn-warning btn-sm">Editar</a>
            <a href="{% url 'vehiculo_delete' vehiculo.pk %}" class="btn btn-danger btn-sm">Eliminar</a>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
